<html>
<head>
        <script src='https://www.google.com/recaptcha/api.js'></script>

        <script type="text/javascript">  
  function showRecaptcha(element) {
     Recaptcha.create("6LfTBgQTAAAAABfIv7HMHZZwAMXam_Oa8s583afT", element, {
       theme: "red",
       callback: Recaptcha.focus_response_field});
   }
   $(document).ready(function(){
    showRecaptcha('recaptcha_div');

    $("#form").submit(function(ev){
        ev.preventDefault();
        if (!$(this).valid()) return;

          $.ajax({
              type: "post",
              url: "/send_email",
              data: $('#form').serialize(),
              dataType: "json",
              success: function(response) {
              $('#form').html("<div id='message'></div>");
              if(response.message === "success") {
                  $('#message').html("<h2>Message successfully sent.</h2>").hide().fadeIn(1500);
              } else {
                  $('#message').html("<h2>Error sending the message</h2>").hide().fadeIn(1500);
              }
              },
              error: function(xhr, ajaxOptions, thrownError){
              $('#form').html("<div id='message'></div>");
              $('#message').html("<h2>Error sending the message</h2>").hide().fadeIn(1500);
              } 
          });
        
          
    });
    });
</script>

</head>
<body>
<section id="rsvp">
        <div class="container">
            <form id="contact-form" class="contact-form" method="post" data-success="Message successfully sent!">

  <label for="name">Name</label>
  <input id="name" type="text" name="name" class="field" required autofocus /><br/>

  <label for="email">E-mail</label>
  <input id="email" type="email" name="email" class="field" required /><br/>

  <label for="subject">Subject</label>
  <input id="subject" type="text" name="subject" class="field" required /><br/>

  <label for="message">Message</label>
  <textarea id="message" name="message" required ></textarea><br/>

  <label for="recaptcha_response_field">Captcha</label>
  <div id="recaptcha_widget" class="recaptcha">
    <div class="image">
    <div class="g-recaptcha" data-sitekey="6LfTBgQTAAAAABfIv7HMHZZwAMXam_Oa8s583afT"></div>
    </div>

    <!-- <div class="headline recaptcha_only_if_image">Enter the words above:</div>
    <div class="headline recaptcha_only_if_audio">Enter the numbers you hear:</div>

    <input type="text" id="recaptcha_response_field" name="recaptcha_response_field" required />
    <span class="recaptcha_icon"><a href="javascript:Recaptcha.reload()"><i class="fa fa-refresh"></i></a></span>
    <span class="recaptcha_icon recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')"><i class="fa fa-volume-up"></i></a></span>
    <span class="recaptcha_icon recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')"><i class="fa fa-font"></i></a></span>
    <span class="recaptcha_icon"><a href="javascript:Recaptcha.showhelp()"><i class="fa fa-question-circle"></i></a></span> -->
  </div><br/>
  <!-- <div id="notice" class="notice" data-captcha-failed="Incorrect captcha!" data-error="There was an error sending the message, please try again."></div> -->
  <button type="submit">Send</button>
</form>

        </div>
    </section>
</body>
</html>
